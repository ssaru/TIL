# 지옥에서 온 git



## Git의 원리



### 1. gistory 설치

git의 첫번째 버전을 확인하는 것을 통해서 Git을 파악하거나, 어떠한 명령어를 내렸을 때, `.git`디렉토리에서 어떤 일이 일어나는가를 확인하는 것을 통해서 Git이 동작하는 방법을 확인할 수 있습니다.



gistory란 웹기반으로  `.git`폴더의 상태를 모니터링하며, 해당 파일을 추적합니다. 만약에 어떤파일이 최근에 수정됬다면 해당파일이 제일 상단에 올라오게되는 프로그램입니다.    

​    

#### 1-1). pip를 이용한 설치

gistory 설치는 `pip`를 이용하여 설치합니다.

``` bash
$ pip install gistory

OR

$ pip3 install gistory
```

​        

#### 1-2). gistory 실행

`.git`폴더가 있는 Git으로 관리하는 폴더에서 다음과 같은 명령어를 이용하여 gistory를 작동합니다.



```bash
$ gistory
```

​    

### 2. git add의 원리

​    

파일이 변경점이 생기거나, 파일이 새로 생겼을 때, Git은 아무 반응하지 않는다. 

변경된 파일을 `git add <file>`을 통해서 staged area에 올리게되면, `.git`폴더 안에는 `index`라는 파일과 `objects/` 디렉토리안에 번호와 함께 특정한 해시코드를 같은 파일이 하나 새로 생기게됩니다.

예를들어 새로생긴 파일 이름이 `objects/78/981922613b2afb602...`이라는 파일이 생겼다고 했을 때, 해당파일을 열어보면 파일에 대한 변경점이 적혀있는 것을 확인할 수 있습니다. 하지만 파일에 대한 변경점은 적혀있지만, 해당 파일이 어떤 파일의 이름을 가지고있는지는 적혀있지 않은 것을 확인할 수 있습니다.



이런 파일 이름은 `index`라는 파일안에 해당 파일 이름과, 해시코드, 날짜가 적혀있는 것을 확인할 수 있습니다.



즉, 파일의 이름은 `index`에, 파일의 내용은 `objects/`안에 있습니다. 앞으로 `objects/`폴더 안에 있는 파일들을 `object`라고 부르도록 하겠습니다.



여기에 새로운 파일을 하나 더 작성해서 `git add`명령어를 사용하게 되면, 새로운 `object`파일이 `objects/`폴더에 생기며, `index`파일 맨 하단에 방금 입력했던 파일명에 대한 내용이 새로 기록되는 것을 확인할 수 있습니다.



특정한 폴더를 `cp`명령어를 이용해서 파일을 복사하게 되면, 특정한 `object`가 생성되지 않으며 단순히 `index`파일 맨 하단에 같은 `object`를 명시하고 있는 것을 확인할 수 있습니다.

(해당 내용은 Git에서 같은 파일에 대한 중복을 크게 줄여주기 때문에 중요한 내용입니다.)